import{r as a,H as e,o as s,c as t,w as l,i as n,a as o,b as u,d as c,e as i,f as d,F as m,g as p,y as r,t as f,S as _,v,j as k,A as y,K as T,k as b,z as g}from"./index-BC-mzwrj.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=x({__name:"coupons",setup(x){const C=["可用优惠券","已过期"],h=a(0),j=a([]),w=a(!1),S=a(!1),z=a(1);a(10);const A=[{id:"C001",name:"新人专享券",description:"仅限新用户使用",amount:10,condition:100,startTime:"2023-01-01",endTime:"2023-12-31",status:"valid"},{id:"C002",name:"宠物用品券",description:"仅限购买宠物用品",amount:20,condition:200,startTime:"2023-06-01",endTime:"2023-06-30",status:"valid"},{id:"C003",name:"医疗咨询券",description:"仅限在线医疗咨询",amount:50,condition:0,startTime:"2023-05-01",endTime:"2023-05-31",status:"expired"},{id:"C004",name:"会员专享券",description:"仅限会员使用",amount:30,condition:150,startTime:"2023-04-01",endTime:"2023-04-30",status:"expired"}],F=e((()=>j.value.filter((a=>0===h.value?"valid"===a.status:"expired"===a.status)))),H=()=>{S.value=!0,setTimeout((()=>{j.value=A,w.value=!1,S.value=!1,z.value++}),500)},I=()=>{!S.value&&w.value&&H()},K=()=>{y()};return s((()=>{H()})),(a,e)=>{const s=c,y=n,x=k,j=_;return o(),t(y,{class:"coupons-container"},{default:l((()=>[u(y,{class:"nav-bar"},{default:l((()=>[u(s,{class:"nav-title"},{default:l((()=>[i("我的优惠券")])),_:1}),u(s,{class:"nav-back iconfont icon-back",onClick:K})])),_:1}),u(y,{class:"tab-bar"},{default:l((()=>[(o(),d(m,null,p(C,((a,e)=>u(y,{key:e,class:r(["tab-item",{active:h.value===e}]),onClick:a=>(a=>{h.value=a})(e)},{default:l((()=>[u(s,null,{default:l((()=>[i(f(a),1)])),_:2},1024)])),_:2},1032,["class","onClick"]))),64))])),_:1}),u(j,{"scroll-y":"",class:"coupons-scroll-view",onScrolltolower:I},{default:l((()=>[0===F.value.length?(o(),t(y,{key:0,class:"empty-tip"},{default:l((()=>[u(x,{class:"empty-icon",src:"/petpal/static/images/empty-coupon.png"}),u(s,null,{default:l((()=>[i("暂无"+f(0===h.value?"可用":"已过期")+"优惠券",1)])),_:1})])),_:1})):v("",!0),u(y,{class:"coupons-list"},{default:l((()=>[(o(!0),d(m,null,p(F.value,((a,e)=>(o(),t(y,{key:e,class:r(["coupon-item",{expired:1===h.value}])},{default:l((()=>[u(y,{class:"coupon-left"},{default:l((()=>[u(y,{class:"coupon-amount"},{default:l((()=>[u(s,{class:"amount-symbol"},{default:l((()=>[i("¥")])),_:1}),u(s,{class:"amount-value"},{default:l((()=>[i(f(a.amount),1)])),_:2},1024)])),_:2},1024),u(y,{class:"coupon-condition"},{default:l((()=>[i("满"+f(a.condition)+"元可用",1)])),_:2},1024)])),_:2},1024),u(y,{class:"coupon-right"},{default:l((()=>[u(y,{class:"coupon-info"},{default:l((()=>[u(y,{class:"coupon-name"},{default:l((()=>[i(f(a.name),1)])),_:2},1024),u(y,{class:"coupon-desc"},{default:l((()=>[i(f(a.description),1)])),_:2},1024),u(y,{class:"coupon-time"},{default:l((()=>[i(f(a.startTime)+" - "+f(a.endTime),1)])),_:2},1024)])),_:2},1024),u(y,{class:"coupon-action"},{default:l((()=>[0===h.value?(o(),t(s,{key:0,class:"use-btn",onClick:e=>(a=>{T({title:"使用优惠券",content:`确定要使用${a.name}吗？`,success:a=>{a.confirm&&(b({title:"使用成功",icon:"success"}),setTimeout((()=>{g({url:"/pages/index/index"})}),1500))}})})(a)},{default:l((()=>[i("立即使用")])),_:2},1032,["onClick"])):(o(),t(s,{key:1,class:"expired-tag"},{default:l((()=>[i("已过期")])),_:1}))])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1}),w.value&&F.value.length>0?(o(),t(y,{key:1,class:"loading-more"},{default:l((()=>[u(s,null,{default:l((()=>[i("加载中...")])),_:1})])),_:1})):v("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-721bcd1b"]]);export{C as default};
