import{r as a,c as e,w as l,i as t,a as s,b as o,e as c,j as n,d as i,I as u,y as r,x as d,J as p,k as f,s as m,h as v,p as _,u as g,A as h,K as y}from"./index-BC-mzwrj.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k=b({__name:"pet-info",setup(b){const k=a({avatar:"",name:"",type:"dog",gender:"male",age:"",months:"",weight:""}),x=()=>{p({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:a=>{const e=a.tempFilePaths[0];k.value.avatar=e,console.log("选择了图片：",e)}})},w=()=>{k.value.name?k.value.avatar?(m({title:"保存中..."}),setTimeout((()=>{v();try{const a=_("userInfo");if(a){const e=JSON.parse(a);e.petAvatar=k.value.avatar,e.hasPet=!0,g("userInfo",JSON.stringify(e)),f({title:"保存成功",icon:"success"}),setTimeout((()=>{h({delta:2})}),1500)}}catch(a){console.error("保存宠物信息失败",a),f({title:"保存失败，请重试",icon:"none"})}}),1500)):f({title:"请上传宠物头像",icon:"none"}):f({title:"请输入宠物名称",icon:"none"})},V=()=>{y({title:"确认跳过",content:"完善宠物信息可以获得更个性化的体验，确定要跳过吗？",confirmColor:"#6F87FF",success:a=>{if(a.confirm){try{const a=_("userInfo");if(a){const e=JSON.parse(a);e.petAvatar||(e.petAvatar="/static/images/pet.png",g("userInfo",JSON.stringify(e)))}}catch(e){console.error("设置默认宠物头像失败",e)}h({delta:2})}}})};return(a,p)=>{const f=t,m=n,v=i,_=u,g=d;return s(),e(f,{class:"pet-info-container"},{default:l((()=>[o(f,{class:"pet-info-header"},{default:l((()=>[o(f,{class:"header-title"},{default:l((()=>[c("完善宠物信息")])),_:1}),o(f,{class:"header-subtitle"},{default:l((()=>[c("帮助我们更好地了解您的宠物")])),_:1})])),_:1}),o(f,{class:"pet-form"},{default:l((()=>[o(f,{class:"avatar-section"},{default:l((()=>[o(f,{class:"avatar-wrapper",onClick:x},{default:l((()=>[k.value.avatar?(s(),e(m,{key:0,class:"pet-avatar",src:k.value.avatar,mode:"aspectFill"},null,8,["src"])):(s(),e(v,{key:1,class:"avatar-placeholder iconfont icon-add"}))])),_:1}),o(v,{class:"avatar-tip"},{default:l((()=>[c("添加宠物头像")])),_:1})])),_:1}),o(f,{class:"form-item"},{default:l((()=>[o(v,{class:"form-label"},{default:l((()=>[c("宠物名称")])),_:1}),o(f,{class:"input-wrapper"},{default:l((()=>[o(_,{class:"form-input",placeholder:"请输入宠物名称",maxlength:"12",modelValue:k.value.name,"onUpdate:modelValue":p[0]||(p[0]=a=>k.value.name=a)},null,8,["modelValue"])])),_:1})])),_:1}),o(f,{class:"form-item"},{default:l((()=>[o(v,{class:"form-label"},{default:l((()=>[c("宠物类型")])),_:1}),o(f,{class:"type-options"},{default:l((()=>[o(f,{class:r(["type-option",{"option-active":"dog"===k.value.type}]),onClick:p[1]||(p[1]=a=>k.value.type="dog")},{default:l((()=>[o(v,{class:"option-icon iconfont icon-dog"}),o(v,{class:"option-text"},{default:l((()=>[c("狗狗")])),_:1})])),_:1},8,["class"]),o(f,{class:r(["type-option",{"option-active":"cat"===k.value.type}]),onClick:p[2]||(p[2]=a=>k.value.type="cat")},{default:l((()=>[o(v,{class:"option-icon iconfont icon-cat"}),o(v,{class:"option-text"},{default:l((()=>[c("猫咪")])),_:1})])),_:1},8,["class"]),o(f,{class:r(["type-option",{"option-active":"other"===k.value.type}]),onClick:p[3]||(p[3]=a=>k.value.type="other")},{default:l((()=>[o(v,{class:"option-icon iconfont icon-other-pet"}),o(v,{class:"option-text"},{default:l((()=>[c("其他")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1}),o(f,{class:"form-item"},{default:l((()=>[o(v,{class:"form-label"},{default:l((()=>[c("性别")])),_:1}),o(f,{class:"radio-group"},{default:l((()=>[o(f,{class:r(["radio-item",{"radio-active":"male"===k.value.gender}]),onClick:p[4]||(p[4]=a=>k.value.gender="male")},{default:l((()=>[o(v,{class:r(["radio-icon",{"icon-active":"male"===k.value.gender}])},null,8,["class"]),o(v,{class:"radio-text"},{default:l((()=>[c("公")])),_:1})])),_:1},8,["class"]),o(f,{class:r(["radio-item",{"radio-active":"female"===k.value.gender}]),onClick:p[5]||(p[5]=a=>k.value.gender="female")},{default:l((()=>[o(v,{class:r(["radio-icon",{"icon-active":"female"===k.value.gender}])},null,8,["class"]),o(v,{class:"radio-text"},{default:l((()=>[c("母")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1}),o(f,{class:"form-item"},{default:l((()=>[o(v,{class:"form-label"},{default:l((()=>[c("年龄")])),_:1}),o(f,{class:"input-wrapper age-wrapper"},{default:l((()=>[o(_,{class:"form-input age-input",type:"number",placeholder:"年龄",modelValue:k.value.age,"onUpdate:modelValue":p[6]||(p[6]=a=>k.value.age=a)},null,8,["modelValue"]),o(v,{class:"unit-text"},{default:l((()=>[c("岁")])),_:1}),o(_,{class:"form-input age-input",type:"number",placeholder:"月份",modelValue:k.value.months,"onUpdate:modelValue":p[7]||(p[7]=a=>k.value.months=a)},null,8,["modelValue"]),o(v,{class:"unit-text"},{default:l((()=>[c("个月")])),_:1})])),_:1})])),_:1}),o(f,{class:"form-item"},{default:l((()=>[o(v,{class:"form-label"},{default:l((()=>[c("体重")])),_:1}),o(f,{class:"input-wrapper weight-wrapper"},{default:l((()=>[o(_,{class:"form-input weight-input",type:"digit",placeholder:"体重",modelValue:k.value.weight,"onUpdate:modelValue":p[8]||(p[8]=a=>k.value.weight=a)},null,8,["modelValue"]),o(v,{class:"unit-text"},{default:l((()=>[c("kg")])),_:1})])),_:1})])),_:1}),o(g,{class:"submit-btn",onClick:w},{default:l((()=>[c("保存")])),_:1}),o(g,{class:"skip-btn",onClick:V},{default:l((()=>[c("暂时跳过")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-bd5dc028"]]);export{k as default};
