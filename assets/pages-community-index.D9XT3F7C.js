import{r as e,H as t,o as a,c as l,w as s,i,a as c,b as n,d as o,e as u,f as m,F as d,g as r,y as f,t as g,S as p,v,j as _,O as k,A as y,n as b,K as I,k as C,R as h}from"./index-BC-mzwrj.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=T({__name:"index",setup(T){const x=["我的发布","我的收藏","我的点赞","我的评论"],O=e(0),j=e([]),w=e(!1),F=e(!1),L=e(1);e(10);const M=[{id:"P001",publishTime:"2023-11-25 14:30",content:"今天带我家的小白去公园玩，它特别开心！这是它第一次见到这么多狗狗，交到了好多新朋友。",images:["/static/images/pet.png","/static/images/pet.png","/static/images/pet.png"],likes:128,comments:32,collects:15},{id:"P002",publishTime:"2023-11-24 10:15",content:"分享一下我家小黑的日常，它最近特别喜欢吃这种狗粮，毛发也变得更加亮泽了。",images:["/static/images/pet.png"],likes:86,comments:18,collects:7},{id:"P003",publishTime:"2023-11-23 16:45",content:"今天带小白去做了体检，医生说它很健康，只是有点胖了，需要控制饮食。",images:["/static/images/pet.png","/static/images/pet.png"],likes:95,comments:24,collects:12},{id:"C001",interactTime:"2023-11-25 15:20",title:"如何训练狗狗不随地大小便",summary:"分享一些实用的训练技巧，帮助狗狗养成良好的习惯...",coverImage:"/static/images/pet.png",originalId:"O001"},{id:"C002",interactTime:"2023-11-24 09:30",title:"猫咪的日常护理指南",summary:"猫咪的毛发护理、指甲修剪、耳朵清洁等日常护理技巧...",coverImage:"/static/images/pet.png",originalId:"O002"},{id:"L001",interactTime:"2023-11-25 16:10",title:"宠物营养餐制作方法",summary:"自制宠物营养餐的详细步骤和注意事项...",coverImage:"/static/images/pet.png",originalId:"O003"},{id:"L002",interactTime:"2023-11-24 11:25",title:"宠物医院选择指南",summary:"如何选择一家好的宠物医院，需要注意哪些方面...",coverImage:"/static/images/pet.png",originalId:"O004"},{id:"M001",interactTime:"2023-11-25 17:05",title:"宠物美容技巧分享",summary:"在家给宠物做美容的简单技巧和注意事项...",coverImage:"/static/images/pet.png",originalId:"O005",comment:"这些技巧很实用，我家狗狗现在毛发特别顺滑！"},{id:"M002",interactTime:"2023-11-24 14:40",title:"宠物玩具推荐",summary:"适合不同年龄段宠物的玩具推荐和选择指南...",coverImage:"/static/images/pet.png",originalId:"O006",comment:"我家猫咪特别喜欢这个玩具，每天都要玩好久。"}],P=t((()=>0===O.value?M.filter((e=>e.publishTime)):1===O.value?M.filter((e=>e.originalId&&e.id.startsWith("C"))):2===O.value?M.filter((e=>e.originalId&&e.id.startsWith("L"))):M.filter((e=>e.originalId&&e.id.startsWith("M"))))),W=()=>{F.value=!0,setTimeout((()=>{j.value=P.value,w.value=!1,F.value=!1,L.value++}),500)},$=()=>{!F.value&&w.value&&W()},S=()=>({1:"收藏",2:"点赞",3:"评论"}[O.value]||""),A=()=>{y()};return a((()=>{W()})),(e,t)=>{const a=o,y=i,T=_,F=p;return c(),l(y,{class:"community-container"},{default:s((()=>[n(y,{class:"nav-bar"},{default:s((()=>[n(a,{class:"nav-title"},{default:s((()=>[u("社区互动")])),_:1}),n(a,{class:"nav-back iconfont icon-back",onClick:A})])),_:1}),n(y,{class:"tab-bar"},{default:s((()=>[(c(),m(d,null,r(x,((e,t)=>n(y,{key:t,class:f(["tab-item",{active:O.value===t}]),onClick:e=>(e=>{O.value!==e&&(O.value=e,L.value=1,j.value=[],W())})(t)},{default:s((()=>[n(a,null,{default:s((()=>[u(g(e),1)])),_:2},1024)])),_:2},1032,["class","onClick"]))),64))])),_:1}),n(F,{"scroll-y":"",class:"content-scroll-view",onScrolltolower:$},{default:s((()=>[0===j.value.length?(c(),l(y,{key:0,class:"empty-tip"},{default:s((()=>[n(T,{class:"empty-icon",src:"/petpal/static/images/empty-community.png"}),n(a,null,{default:s((()=>[u("暂无相关内容")])),_:1})])),_:1})):v("",!0),0===O.value?(c(!0),m(d,{key:1},r(j.value,((e,t)=>(c(),l(y,{key:t,class:"content-item"},{default:s((()=>[n(y,{class:"content-header"},{default:s((()=>[n(a,{class:"content-time"},{default:s((()=>[u(g(e.publishTime),1)])),_:2},1024),n(y,{class:"content-actions"},{default:s((()=>[n(a,{class:"action-btn edit-btn",onClick:k((t=>(e=>{b({url:`/pages/community/edit?id=${e.id}`})})(e)),["stop"])},{default:s((()=>[u("编辑")])),_:2},1032,["onClick"]),n(a,{class:"action-btn delete-btn",onClick:k((t=>(e=>{I({title:"确认删除",content:"确定要删除这条内容吗？",success:t=>{if(t.confirm){const t=j.value.findIndex((t=>t.id===e.id));t>-1&&(j.value.splice(t,1),C({title:"删除成功",icon:"success"}))}}})})(e)),["stop"])},{default:s((()=>[u("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),n(y,{class:"content-body"},{default:s((()=>[n(y,{class:"content-text"},{default:s((()=>[u(g(e.content),1)])),_:2},1024),e.images&&e.images.length>0?(c(),l(y,{key:0,class:"content-images"},{default:s((()=>[(c(!0),m(d,null,r(e.images,((t,a)=>(c(),l(T,{key:a,class:"content-image",src:t,mode:"aspectFill",onClick:t=>{return l=e.images,void h({urls:l,current:l[a]});var l}},null,8,["src","onClick"])))),128))])),_:2},1024)):v("",!0)])),_:2},1024),n(y,{class:"content-footer"},{default:s((()=>[n(y,{class:"interaction-info"},{default:s((()=>[n(a,{class:"interaction-item"},{default:s((()=>[n(a,{class:"iconfont icon-like"}),n(a,null,{default:s((()=>[u(g(e.likes),1)])),_:2},1024)])),_:2},1024),n(a,{class:"interaction-item"},{default:s((()=>[n(a,{class:"iconfont icon-comment"}),n(a,null,{default:s((()=>[u(g(e.comments),1)])),_:2},1024)])),_:2},1024),n(a,{class:"interaction-item"},{default:s((()=>[n(a,{class:"iconfont icon-collect"}),n(a,null,{default:s((()=>[u(g(e.collects),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):v("",!0),0!==O.value?(c(!0),m(d,{key:2},r(j.value,((e,t)=>(c(),l(y,{key:t,class:"content-item"},{default:s((()=>[n(y,{class:"content-header"},{default:s((()=>[n(a,{class:"content-time"},{default:s((()=>[u(g(e.interactTime),1)])),_:2},1024),n(a,{class:"content-type"},{default:s((()=>[u(g(S()),1)])),_:1})])),_:2},1024),n(y,{class:"content-body",onClick:t=>(e=>{b({url:`/pages/community/detail?id=${e.originalId}`})})(e)},{default:s((()=>[n(y,{class:"content-cover"},{default:s((()=>[n(T,{class:"cover-image",src:e.coverImage,mode:"aspectFill"},null,8,["src"])])),_:2},1024),n(y,{class:"content-info"},{default:s((()=>[n(y,{class:"content-title"},{default:s((()=>[u(g(e.title),1)])),_:2},1024),n(y,{class:"content-summary"},{default:s((()=>[u(g(e.summary),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),n(y,{class:"content-footer"},{default:s((()=>[n(y,{class:"content-actions"},{default:s((()=>[n(a,{class:"action-btn delete-btn",onClick:k((t=>(e=>{I({title:"确认删除",content:`确定要删除这条${S()}吗？`,success:t=>{if(t.confirm){const t=j.value.findIndex((t=>t.id===e.id));t>-1&&(j.value.splice(t,1),C({title:"删除成功",icon:"success"}))}}})})(e)),["stop"])},{default:s((()=>[u("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):v("",!0),w.value&&j.value.length>0?(c(),l(y,{key:3,class:"loading-more"},{default:s((()=>[n(a,null,{default:s((()=>[u("加载中...")])),_:1})])),_:1})):v("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-ccfa5206"]]);export{x as default};
