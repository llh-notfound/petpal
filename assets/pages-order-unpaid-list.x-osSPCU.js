import{r as e,$ as a,k as s,o as r,m as l,c as t,w as o,q as c,i as d,a as n,b as u,d as i,e as f,S as m,v as _,f as p,j as v,F as y,g,t as b,x as k,A as x,n as P}from"./index-BC-mzwrj.js";import{_ as I}from"./empty-order._VezAbnF.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const q=h({__name:"unpaid-list",setup(h){const q=e([]),j=e(!1),w=e(!1),C=()=>{w.value=!0,setTimeout((()=>{try{const e=c.mockOrderList.filter((e=>"待付款"===e.status));q.value=[...e]}catch(e){console.error("获取订单列表失败:",e),q.value=[]}finally{w.value=!1,j.value=!1}}),500)},N=()=>{!w.value&&j.value&&C()},S=()=>{x()};return a("orderPaid",(e=>{e&&void 0!==e.orderIndex&&(q.value.splice(e.orderIndex,1),s({title:"订单已支付",icon:"success"}))})),r((()=>(C(),()=>{l("orderPaid")}))),(e,a)=>{const r=i,l=d,c=v,x=k,h=m;return n(),t(l,{class:"unpaid-order-container"},{default:o((()=>[u(l,{class:"nav-bar"},{default:o((()=>[u(r,{class:"nav-title"},{default:o((()=>[f("未付款订单")])),_:1}),u(r,{class:"nav-back iconfont icon-back",onClick:S})])),_:1}),u(h,{"scroll-y":"",class:"order-scroll-view",onScrolltolower:N},{default:o((()=>[0===q.value.length?(n(),t(l,{key:0,class:"empty-tip"},{default:o((()=>[u(c,{class:"empty-icon",src:I}),u(r,null,{default:o((()=>[f("暂无未付款订单")])),_:1})])),_:1})):_("",!0),(n(!0),p(y,null,g(q.value,((e,a)=>(n(),t(l,{key:a,class:"order-item"},{default:o((()=>[u(l,{class:"order-header"},{default:o((()=>[u(r,{class:"order-number"},{default:o((()=>[f("订单号: "+b(e.orderNumber),1)])),_:2},1024),u(r,{class:"order-status status-pending"},{default:o((()=>[f(b(e.status),1)])),_:2},1024)])),_:2},1024),u(l,{class:"order-content"},{default:o((()=>[u(c,{class:"goods-image",src:e.image},null,8,["src"]),u(l,{class:"order-info"},{default:o((()=>[u(l,{class:"order-name"},{default:o((()=>[f(b(e.name),1)])),_:2},1024),u(l,{class:"order-specs"},{default:o((()=>[f(b(e.specs),1)])),_:2},1024),u(l,{class:"order-price"},{default:o((()=>[u(r,null,{default:o((()=>[f("¥"+b(e.price),1)])),_:2},1024),u(r,{class:"order-quantity"},{default:o((()=>[f("x"+b(e.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(l,{class:"order-footer"},{default:o((()=>[u(l,{class:"order-total"},{default:o((()=>[f("合计: ¥"+b(e.totalPrice),1)])),_:2},1024),u(l,{class:"order-actions"},{default:o((()=>[u(x,{class:"action-btn primary-btn",onClick:r=>((e,a)=>{const r=encodeURIComponent(JSON.stringify({orderNumber:e.orderNumber,totalPrice:e.totalPrice,goodsInfo:{id:e.id||Date.now(),name:e.name,image:e.image,specs:e.specs,price:e.price,quantity:e.quantity},orderIndex:a}));P({url:`/pages/order/confirm-order?orderData=${r}&fromPaymentPending=true&fromUnpaidList=true`,success:()=>{console.log("跳转到确认订单页面成功")},fail:e=>{console.error("跳转到确认订单页面失败:",e),s({title:"页面跳转失败",icon:"none"})}})})(e,a)},{default:o((()=>[f("去付款")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),j.value&&q.value.length>0?(n(),t(l,{key:1,class:"loading-more"},{default:o((()=>[u(r,null,{default:o((()=>[f("加载中...")])),_:1})])),_:1})):_("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-cc023e51"]]);export{q as default};
