import{r as a,q as e,o as s,c as l,w as t,i as c,a as u,b as i,d as n,e as o,S as r,v as p,f as d,j as y,F as f,g as _,t as m,y as v,x as b,A as k,n as g}from"./index-BC-mzwrj.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const N=C({__name:"insurance-list",setup(C){const N=a([]),x=a(!1),h=a(!1);a(1),a(10);const j=e.mockOrderList.filter((a=>"insurance"===a.type)),w=()=>{h.value=!0,setTimeout((()=>{try{N.value=[...j]}catch(a){console.error("获取保单列表失败:",a),N.value=[]}finally{h.value=!1,x.value=!1}}),500)},$=()=>{!h.value&&x.value&&w()},D=()=>{k()};return s((()=>{w()})),(a,e)=>{const s=n,k=c,C=y,h=b,j=r;return u(),l(k,{class:"insurance-policy-container"},{default:t((()=>[i(k,{class:"nav-bar"},{default:t((()=>[i(s,{class:"nav-title"},{default:t((()=>[o("保险保单")])),_:1}),i(s,{class:"nav-back iconfont icon-back",onClick:D})])),_:1}),i(j,{"scroll-y":"",class:"policy-scroll-view",onScrolltolower:$},{default:t((()=>[0===N.value.length?(u(),l(k,{key:0,class:"empty-tip"},{default:t((()=>[i(C,{class:"empty-icon",src:"/petpal/static/images/empty-policy.png"}),i(s,null,{default:t((()=>[o("暂无保险保单")])),_:1})])),_:1})):p("",!0),(u(!0),d(f,null,_(N.value,((a,e)=>(u(),l(k,{key:e,class:"policy-item"},{default:t((()=>[i(k,{class:"policy-header"},{default:t((()=>{return[i(s,{class:"policy-number"},{default:t((()=>[o("保单号: "+m(a.policyNumber),1)])),_:2},1024),i(s,{class:v(["policy-status",(e=a.status,{"待付款":"status-pending","已生效":"status-active"}[e]||"")])},{default:t((()=>[o(m(a.status),1)])),_:2},1032,["class"])];var e})),_:2},1024),i(k,{class:"policy-content"},{default:t((()=>[i(k,{class:"insurance-info"},{default:t((()=>[i(k,{class:"insurance-type"},{default:t((()=>[o("险种: "+m(a.insuranceType),1)])),_:2},1024),i(k,{class:"effective-date"},{default:t((()=>[o("生效日期: "+m(a.effectiveDate),1)])),_:2},1024),i(k,{class:"expiry-date"},{default:t((()=>[o("到期日期: "+m(a.expiryDate),1)])),_:2},1024),i(k,{class:"insured-pet"},{default:t((()=>[o("投保宠物: "+m(a.insuredPet),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(k,{class:"policy-footer"},{default:t((()=>[i(k,{class:"policy-total"},{default:t((()=>[o("保费: ¥"+m(a.premium)+"/年",1)])),_:2},1024),i(k,{class:"policy-actions"},{default:t((()=>["已生效"===a.status?(u(),l(h,{key:0,class:"action-btn",onClick:e=>(a=>{g({url:`/pages/insurance/policy-detail?policyNumber=${a.policyNumber}`})})(a)},{default:t((()=>[o("查看保单")])),_:2},1032,["onClick"])):p("",!0),"已生效"===a.status?(u(),l(h,{key:1,class:"action-btn primary-btn",onClick:e=>(a=>{g({url:`/pages/insurance/claim?policyNumber=${a.policyNumber}`})})(a)},{default:t((()=>[o("申请理赔")])),_:2},1032,["onClick"])):p("",!0),"待付款"===a.status?(u(),l(h,{key:2,class:"action-btn primary-btn",onClick:e=>(a=>{g({url:`/pages/order/payment?orderNumber=${a.policyNumber}`})})(a)},{default:t((()=>[o("去付款")])),_:2},1032,["onClick"])):p("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),x.value&&N.value.length>0?(u(),l(k,{key:1,class:"loading-more"},{default:t((()=>[i(s,null,{default:t((()=>[o("加载中...")])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-3060002e"]]);export{N as default};
