import{r as e,o as a,p as s,c as t,w as l,V as n,i,a as o,b as c,d as u,e as r,S as d,v as m,f as v,F as f,g as p,y as g,j as _,t as S,I as k,A as h,k as w}from"./index-BC-mzwrj.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=b({__name:"customer-service",setup(b){const y=e({avatar:"/static/images/avatar.png",nickname:"用户"}),P=e([]),x=e(!1),D=e(0),V=e(""),j=e(""),A=[{id:1,content:"您好，欢迎咨询PetPal宠物服务平台，请问有什么可以帮您？",time:"10:00",isSelf:!1},{id:2,content:"我想咨询一下宠物保险的理赔流程",time:"10:01",isSelf:!0},{id:3,content:'好的，宠物保险理赔流程如下：\n1. 准备理赔材料（医疗单据、诊断证明等）\n2. 登录APP，进入"我的-保险服务-理赔申请"\n3. 上传理赔材料\n4. 等待审核，一般1-3个工作日\n5. 审核通过后，理赔金额将直接打入您的账户',time:"10:02",isSelf:!1},{id:4,content:"谢谢，明白了",time:"10:03",isSelf:!0},{id:5,content:"不客气，还有其他问题吗？",time:"10:04",isSelf:!1}],C=()=>{x.value&&w({title:"没有更多消息了",icon:"none"})},I=()=>{if(!j.value.trim())return void w({title:"请输入消息内容",icon:"none"});const e={id:Date.now(),content:j.value,time:T(new Date),isSelf:!0};P.value.push(e),j.value="",n((()=>{F()})),setTimeout((()=>{const a={id:Date.now()+1,content:$(e.content),time:T(new Date),isSelf:!1};P.value.push(a),n((()=>{F()}))}),1e3)},F=()=>{if(P.value.length>0){const e=P.value[P.value.length-1];V.value="msg-"+e.id}},T=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`,$=e=>{const a={"保险":'关于保险问题，您可以查看帮助中心的"保险服务"专题，或直接联系我们的保险专员。',"退款":"退款问题请提供您的订单号，我们会尽快为您处理。","物流":"物流问题请提供您的物流单号，我们会帮您查询物流状态。","账号":"账号问题请详细描述您遇到的问题，我们会尽快为您解决。","密码":'如果您忘记了密码，可以点击登录页面的"忘记密码"进行重置。',"优惠券":"优惠券使用问题请提供优惠券编号，我们会帮您核实。","宠物":"关于宠物健康问题，建议您咨询我们的在线兽医。","医生":'您可以在APP首页的"在线问诊"中预约医生进行咨询。',"预约":"预约问题请提供您想预约的服务和时间，我们会尽快为您安排。","投诉":"非常抱歉给您带来不便，我们会认真处理您的投诉，并尽快给您回复。"};for(const s in a)if(e.includes(s))return a[s];return"感谢您的咨询，请问还有其他问题吗？如需更多帮助，您可以查看帮助中心或提交投诉建议。"},H=()=>{h()};return a((()=>{const e=s("userInfo");e&&(y.value=e),setTimeout((()=>{P.value=A,x.value=!1,n((()=>{F()}))}),500)})),(e,a)=>{const s=u,n=i,h=_,w=d,b=k;return o(),t(n,{class:"customer-service-container"},{default:l((()=>[c(n,{class:"nav-bar"},{default:l((()=>[c(s,{class:"nav-title"},{default:l((()=>[r("在线客服")])),_:1}),c(s,{class:"nav-back iconfont icon-back",onClick:H})])),_:1}),c(w,{"scroll-y":"",class:"chat-area","scroll-top":D.value,"scroll-into-view":V.value,onScrolltoupper:C},{default:l((()=>[x.value?(o(),t(n,{key:0,class:"loading-more"},{default:l((()=>[c(s,null,{default:l((()=>[r("加载中...")])),_:1})])),_:1})):m("",!0),c(n,{class:"message-list"},{default:l((()=>[(o(!0),v(f,null,p(P.value,((e,a)=>(o(),t(n,{key:a,id:"msg-"+e.id,class:g(["message-item",{"message-self":e.isSelf}])},{default:l((()=>[c(h,{class:"avatar",src:e.isSelf?y.value.avatar:"/static/images/customer-service.png",mode:"aspectFill"},null,8,["src"]),c(n,{class:"message-content"},{default:l((()=>[c(s,{class:"message-text"},{default:l((()=>[r(S(e.content),1)])),_:2},1024),c(s,{class:"message-time"},{default:l((()=>[r(S(e.time),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["id","class"])))),128))])),_:1})])),_:1},8,["scroll-top","scroll-into-view"]),c(n,{class:"input-area"},{default:l((()=>[c(b,{class:"message-input",modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),placeholder:"请输入您的问题","confirm-type":"send",onConfirm:I},null,8,["modelValue"]),c(n,{class:"send-btn",onClick:I},{default:l((()=>[r("发送")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-be370771"]]);export{y as default};
