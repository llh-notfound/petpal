import{r as a,q as e,o as s,c as t,w as l,i as c,a as r,b as o,d as u,e as d,S as n,v as i,f,j as m,F as _,g as p,t as v,y as b,x as k,A as y,k as g,n as C}from"./index-BC-mzwrj.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const N=h({__name:"medical-list",setup(h){const N=a([]),x=a(!1),j=a(!1);a(1),a(10);const w=e.mockOrderList.filter((a=>"medical"===a.type)),T=()=>{j.value=!0,setTimeout((()=>{try{N.value=[...w]}catch(a){console.error("获取问诊记录失败:",a),N.value=[]}finally{j.value=!1,x.value=!1}}),500)},P=()=>{!j.value&&x.value&&T()},S=()=>{y()};return s((()=>{T()})),(a,e)=>{const s=u,y=c,h=m,j=k,w=n;return r(),t(y,{class:"medical-record-container"},{default:l((()=>[o(y,{class:"nav-bar"},{default:l((()=>[o(s,{class:"nav-title"},{default:l((()=>[d("医疗问诊记录")])),_:1}),o(s,{class:"nav-back iconfont icon-back",onClick:S})])),_:1}),o(w,{"scroll-y":"",class:"record-scroll-view",onScrolltolower:P},{default:l((()=>[0===N.value.length?(r(),t(y,{key:0,class:"empty-tip"},{default:l((()=>[o(h,{class:"empty-icon",src:"/petpal/static/images/empty-record.png"}),o(s,null,{default:l((()=>[d("暂无问诊记录")])),_:1})])),_:1})):i("",!0),(r(!0),f(_,null,p(N.value,((a,e)=>(r(),t(y,{key:e,class:"record-item"},{default:l((()=>[o(y,{class:"record-header"},{default:l((()=>{return[o(s,{class:"record-number"},{default:l((()=>[d("问诊编号: "+v(a.orderNumber),1)])),_:2},1024),o(s,{class:b(["record-status",(e=a.status,{"待付款":"status-pending","已完成":"status-completed"}[e]||"")])},{default:l((()=>[d(v(a.status),1)])),_:2},1032,["class"])];var e})),_:2},1024),o(y,{class:"record-content"},{default:l((()=>[o(y,{class:"doctor-info"},{default:l((()=>[o(y,{class:"doctor-name"},{default:l((()=>[d("医生: "+v(a.doctorName),1)])),_:2},1024),o(y,{class:"consult-time"},{default:l((()=>[d("问诊时间: "+v(a.consultTime),1)])),_:2},1024),o(y,{class:"diagnosis"},{default:l((()=>[d("诊断: "+v(a.diagnosis),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(y,{class:"record-footer"},{default:l((()=>[o(y,{class:"record-total"},{default:l((()=>[d("费用: ¥"+v(a.totalPrice),1)])),_:2},1024),o(y,{class:"record-actions"},{default:l((()=>["已完成"===a.status&&a.hasPrescription?(r(),t(j,{key:0,class:"action-btn",onClick:a=>(g({title:"处方下载中...",icon:"loading",duration:2e3}),void setTimeout((()=>{g({title:"下载成功",icon:"success"})}),2e3))},{default:l((()=>[d("下载处方")])),_:2},1032,["onClick"])):i("",!0),"待付款"===a.status?(r(),t(j,{key:1,class:"action-btn primary-btn",onClick:e=>(a=>{C({url:`/pages/order/payment?orderNumber=${a.orderNumber}`})})(a)},{default:l((()=>[d("去付款")])),_:2},1032,["onClick"])):i("",!0),o(j,{class:"action-btn",onClick:e=>(a=>{C({url:`/pages/medical/detail?orderNumber=${a.orderNumber}`})})(a)},{default:l((()=>[d("查看详情")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),x.value&&N.value.length>0?(r(),t(y,{key:1,class:"loading-more"},{default:l((()=>[o(s,null,{default:l((()=>[d("加载中...")])),_:1})])),_:1})):i("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-77bf315b"]]);export{N as default};
