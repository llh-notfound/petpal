import{r as e,H as s,o as a,$ as t,l,m as i,c as n,w as c,q as o,k as u,n as r,p as d,u as f,i as m,a as p,b as g,v as _,d as v,e as h,t as k,j as y,A as C}from"./index-BC-mzwrj.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const L=w({__name:"pending-items",setup(w){const L=e(0),b=e(0),x=e(0),I=s((()=>0===L.value&&0===b.value&&0===x.value)),j=()=>{try{if(o.isMockUserLoggedIn()){const e=d("orderList")||[],s=e.filter((e=>"待付款"===e.status)).length,a=e.filter((e=>"medical"===e.type&&"待回复"===e.status)).length,t={unpaidOrders:s,pendingConsultations:a||1,processingClaims:e.filter((e=>"insurance"===e.type&&"处理中"===e.status)).length||1};f("pendingItems",t),L.value=t.unpaidOrders,b.value=t.pendingConsultations,x.value=t.processingClaims,console.log("待处理事项数据:",t)}else L.value=0,b.value=0,x.value=0}catch(e){console.error("获取待处理数据失败",e),L.value=0,b.value=0,x.value=0}},M=()=>{r({url:"/pages/order/unpaid-list"})},O=()=>{r({url:"/pages/order/medical-list"})},U=()=>{r({url:"/pages/order/insurance-list"})},q=()=>{C()};return a((()=>{(o.isMockUserLoggedIn()||(u({title:"请先登录",icon:"none"}),setTimeout((()=>{r({url:"/pages/login/login"})}),1500),0))&&j(),t("userLogin",(()=>{j()})),t("userLogout",(()=>{L.value=0,b.value=0,x.value=0}))})),l((()=>{i("userLogin"),i("userLogout")})),(e,s)=>{const a=v,t=m,l=y;return p(),n(t,{class:"pending-items-container"},{default:c((()=>[g(t,{class:"nav-bar"},{default:c((()=>[g(a,{class:"nav-title"},{default:c((()=>[h("待处理事项")])),_:1}),g(a,{class:"nav-back iconfont icon-back",onClick:q})])),_:1}),g(t,{class:"pending-list"},{default:c((()=>[g(t,{class:"pending-item",onClick:M},{default:c((()=>[g(t,{class:"item-left"},{default:c((()=>[g(t,{class:"item-icon-wrap"},{default:c((()=>[g(a,{class:"item-icon iconfont icon-order"})])),_:1}),g(t,{class:"item-info"},{default:c((()=>[g(a,{class:"item-title"},{default:c((()=>[h("未付款订单")])),_:1}),g(a,{class:"item-desc"},{default:c((()=>[h("您有"+k(L.value)+"个未付款订单",1)])),_:1})])),_:1})])),_:1}),g(t,{class:"item-right"},{default:c((()=>[g(a,{class:"item-count"},{default:c((()=>[h(k(L.value),1)])),_:1}),g(a,{class:"item-arrow iconfont icon-right"})])),_:1})])),_:1}),g(t,{class:"pending-item",onClick:O},{default:c((()=>[g(t,{class:"item-left"},{default:c((()=>[g(t,{class:"item-icon-wrap"},{default:c((()=>[g(a,{class:"item-icon iconfont icon-consultation"})])),_:1}),g(t,{class:"item-info"},{default:c((()=>[g(a,{class:"item-title"},{default:c((()=>[h("问诊待回复")])),_:1}),g(a,{class:"item-desc"},{default:c((()=>[h("您有"+k(b.value)+"个待回复问诊",1)])),_:1})])),_:1})])),_:1}),g(t,{class:"item-right"},{default:c((()=>[g(a,{class:"item-count"},{default:c((()=>[h(k(b.value),1)])),_:1}),g(a,{class:"item-arrow iconfont icon-right"})])),_:1})])),_:1}),g(t,{class:"pending-item",onClick:U},{default:c((()=>[g(t,{class:"item-left"},{default:c((()=>[g(t,{class:"item-icon-wrap"},{default:c((()=>[g(a,{class:"item-icon iconfont icon-insurance"})])),_:1}),g(t,{class:"item-info"},{default:c((()=>[g(a,{class:"item-title"},{default:c((()=>[h("保险理赔进度")])),_:1}),g(a,{class:"item-desc"},{default:c((()=>[h("您有"+k(x.value)+"个理赔正在处理中",1)])),_:1})])),_:1})])),_:1}),g(t,{class:"item-right"},{default:c((()=>[g(a,{class:"item-count"},{default:c((()=>[h(k(x.value),1)])),_:1}),g(a,{class:"item-arrow iconfont icon-right"})])),_:1})])),_:1})])),_:1}),I.value?(p(),n(t,{key:0,class:"empty-state"},{default:c((()=>[g(l,{class:"empty-image",src:"/petpal/static/images/empty.png",mode:"aspectFit"}),g(a,{class:"empty-text"},{default:c((()=>[h("暂无待处理事项")])),_:1})])),_:1})):_("",!0)])),_:1})}}},[["__scopeId","data-v-d22fa8c3"]]);export{L as default};
